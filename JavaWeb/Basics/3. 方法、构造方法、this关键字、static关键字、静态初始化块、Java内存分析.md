# 3. 方法、构造方法、this关键字、static关键字、静态初始化块、Java内存分析
- 方法（函数）
	- 方法的定义

			[修饰符1 修饰符2 ...] 返回值 方法名(形参列表) {
				方法体...
			}

	- 方法的调用需要通过对象
	- 方法的重载
		- 方法的参数可区别方法重载：参数类型、参数个数、参数顺序
	- 可变参数
		- 可变参数可以接受参数个数不定的同一类型的对象
		- 案例

				public static StringBuilder combineObject(Object... objs) {
					StringBuilder str = new StringBuilder();
					for (Object obj: objs) {
						str.append(obj);
					}
					return str;
				}
- Java内存分析：https://www.bilibili.com/video/av59814573?p=65
	- Java的内存分为三个区域：栈、堆、方法区
	- 栈stack
		- 方法执行的内存模型
		- 每个线程对应一个独立的栈
		- 每个方法被调用都会创建一个栈帧
		- 栈帧是向上涨的，且栈帧的释放是从上向下的，即“先进后出”
	- 堆heap
		- 用于存储建立好的对象和数组（数组也是对象）
		- 一个程序只有一个堆，由所有线程共享
		- 堆是不连续的内存空间，分配灵活，速度慢
	- 方法区（也叫静态区）
		- 一个程序一个方法区，被所有线程共享
		- 方法区也是堆
		- 存储的是不变的内容：类信息、静态变量、字符串常量等
- 构造方法（构造器）
	- 改造方法名与类名一致，没有返回值类型（但是有返回值），必须是public方法
	- 通过new关键字调用
	- 构造方法的第一句总是`super();`，不写这句编译器也会自动加上
		- 构造方法先会执行父类的构造方法，即调用super方法
	- 垃圾回收机制(Garbage Collection)
		- 与c++对比，c++开发者需要关注对象消亡时的内存释放（多为动态内存），即c++中的析构函数。但是Java可以自动处理这些需要释放的内存
		- 垃圾回收过程
			1. 发现无用的对象
			2. 回收无用对象的内存空间
		- 发现无用对象的算法
			- 引用计数算法：被引用一次计数+1，被引用变量值变为null，计数-1，优点是算法简单，缺陷是当两个对象相互引用时无法判断其是否为无用对象
			- 应用可达法（根搜索算法）：从根节点开始遍历整个可达节点，没有被遍历到的为无用节点（对象）
		- 通用垃圾回收机制：分代垃圾回收
			- 将堆分区：Eden区、Survivor1区、Survivor2区、Tenured区
			- 刚建立的对象都放在Eden区，Eden区满了后清理Eden、Survivor区，再将Eden区中没被清理的对象放到Survivor区中
			- 在Survivor区经历15次清理后的对象被移到Tenured区中，当Tenured区满了后会触发一次FullGC，FullGC的运行开销很大会对系统性能产生影响
		- 开发中容易造成内存泄漏的操作
			- 创建大量无用对象
			- 静态集合类的使用
			- 各种连接对象未关闭
			- 监听器的使用
	- 创建一个对象分为四步：
		1. 分配对象内存空间，并将对象成员变量初始化为0
		2. 执行属性的显式初始化
		3. 执行构造方法
		4. 返回对象地址，即Java中的对象名就是该对象的地址
	- 构造方法通常是public，但是也可以将其用private修饰，这样可以禁止开发者创建该类的对象，而只能通过类来调用静态变量和方法，这样的类通常是工具类
- 局部变量和成员变量名冲突的解决：this关键字

		public class User {
			int id;
			
			public User(int id) {   //局部变量id与成员变量id重名
				this.id = id;   //this指向对象，this.id是成员变量，id是局部变量
			}
		}

	- static方法中不能使用this关键字
	- 在构造函数的重载中，可用`this(参数列表)`的方法调用构造函数（类似于c++中的委托构造函数）
	- 当方法的参数与静态方法重名时，可用`类名.静态成员`的方法来区分
- static关键字
	- 被static关键字修饰的属性或方法从属于类
	- 静态方法不能使用this关键字和成员变量
	- public修饰的可以被外部访问，再被static修饰的可通过类和对象访问
- 静态初始化块
	- 静态初始化块用于类的初始化操作，在类初始化时执行
	- 静态初始化块在执行时会先执行父类的静态初始化块
	- 定义语法

			static {
				语句块...
			}